#!/usr/bin/env bash
set -euo pipefail

if [[ "${SKIP_GIT_HOOKS:-0}" == "1" ]]; then
  printf '%s\n' "[pre-push] SKIP_GIT_HOOKS=1, skipping checks"
  exit 0
fi

printf '%s\n' "[pre-push] Running cargo fmt --all -- --check..."
cargo fmt --all -- --check

printf '%s\n' "[pre-push] Running cargo clippy --all-targets --all-features -- -D warnings..."
cargo clippy --all-targets --all-features -- -D warnings

printf '%s\n' "[pre-push] Running cargo test..."
cargo test

printf '%s\n' "[pre-push] All checks passed."
